<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Scan & Gestion de Documents</title>
  <link rel="stylesheet" href="index.css" />
</head>
<body>
  <!-- HEADER -->
  <header>
    <div class="logo">ğŸ“„ ScanDoc</div>
    <nav id="menu">
      <ul>
        <li><a href="#">Accueil</a></li>
        <li><a href="#" onclick="openScanner()">Scanner & OCR</a></li>
        <li><a href="#" onclick="generateDocument()">GÃ©nÃ©ration IA</a></li>
        <li><a href="#" onclick="showSavedDocuments()">Documents sauvegardÃ©s</a></li>
      </ul>
    </nav>
    <div class="hamburger" onclick="toggleMenu()">â˜°</div>
  </header>

  <!-- MAIN -->
  <main>
    <h1>Scanner & gÃ©rer vos documents</h1>
    <p class="subtitle">Scannez en plein Ã©cran, OCR automatique, PDF multi-pages</p>

    <div class="cards">
      <div class="card" onclick="openScanner()">
        <span class="icon">ğŸ“·</span>
        <p>Scanner & Lire (OCR)</p>
      </div>
      <div class="card" onclick="generateDocument()">
        <span class="icon">ğŸ¤–</span>
        <p>GÃ©nÃ©rer un document (IA)</p>
      </div>
      <div class="card" onclick="showSavedDocuments()">
        <span class="icon">ğŸ“‚</span>
        <p>Documents sauvegardÃ©s</p>
      </div>
      <div class="card">
        <span class="icon">âš™ï¸</span>
        <p>Personnalisation</p>
      </div>
    </div>
  </main>

  <!-- MODAL SCAN (PLEIN Ã‰CRAN) -->
  <div id="scannerModal" class="modal hidden">
    <!-- Zone vidÃ©o plein Ã©cran -->
    <video id="camera" autoplay playsinline></video>

    <!-- Barre de contrÃ´le pour CAPTURE -->
    <div class="scan-controls" id="scanControls">
      <button class="btn primary" onclick="capture()">ğŸ“¸ Capturer</button>
      <button class="btn ghost" onclick="closeScanner()">âŒ Fermer</button>
    </div>

    <!-- Zone dâ€™aperÃ§u (affichÃ©e aprÃ¨s capture) -->
    <div id="previewPanel" class="preview hidden">
      <div class="preview-top">
        <div class="docname">
          <label for="docName">Nom du document</label>
          <input id="docName" type="text" placeholder="Ex: Contrat_2025" />
          <span class="ext">.pdf</span>
        </div>
        <div class="preview-actions">
          <button class="btn success" onclick="saveCurrentDocument()">ğŸ’¾ Enregistrer</button>
          <button class="btn secondary" onclick="addAnotherPage()">â• Ajouter image</button>
          <button class="btn ghost" onclick="resetCurrent()">â†©ï¸ Recommencer</button>
          <button class="btn ghost" onclick="closeScanner()">âŒ Fermer</button>
        </div>
      </div>

      <div class="preview-body">
        <!-- DerniÃ¨re page capturÃ©e -->
        <canvas id="snapshot"></canvas>

        <!-- Miniatures des pages -->
        <div class="thumbs">
          <h4>Pages</h4>
          <div id="thumbsContainer" class="thumbs-list"></div>
        </div>

        <!-- Texte OCR -->
        <div class="ocr">
          <details open>
            <summary>ğŸ“ Texte OCR (extrait automatiquement)</summary>
            <textarea id="ocrText" rows="10" spellcheck="false" placeholder="Le texte reconnu sâ€™affichera iciâ€¦"></textarea>
          </details>
        </div>
      </div>
    </div>
  </div>

  <!-- MODAL DOCUMENTS SAUVEGARDÃ‰S -->
  <div id="savedDocsModal" class="modal hidden">
    <div class="saved-box">
      <div class="saved-head">
        <h2>ğŸ“‚ Documents sauvegardÃ©s</h2>
        <button class="btn ghost" onclick="closeSavedDocs()">âŒ Fermer</button>
      </div>
      <ul id="savedDocsList" class="saved-list"></ul>
    </div>
  </div>

  <!-- Librairies -->
  <script src="https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

  <!-- Script app -->
  <script src="index.js"></script>
</body>
</html>
